<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Search Results | AIWithViveka</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

<header>
  <div class="container header-container">
    <div class="logo">
      <a href="index.html"><img src="assets/logo.png" alt="AIWithViveka Logo" style="height:50px;"></a>
    </div>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="blogs.html">Blogs</a>
      <div class="dropdown">
        <a href="topics.html">Topics â–¾</a>
        <div class="dropdown-menu">
          <a href="topics/agentic-ai.html">Agentic AI</a>
          <a href="topics/computer-vision.html">Computer Vision</a>
          <a href="topics/deep-learning.html">Deep Learning</a>
          <a href="topics/llm.html">LLM</a>
          <a href="topics/mlops.html">MLOps</a>
          <a href="topics/machine-learning.html">Machine Learning</a>
          <a href="topics/ai-news.html">AI News & Trends</a>
        </div>
      </div>
      <a href="experience.html">Experience</a>
      <a href="contact.html">Contact</a>
      <a href="newsletter.html">Newsletter</a>
    </nav>
    <div class="nav-search">
      <input type="text" id="top-search-input" placeholder="Search..." />
      <button id="top-search-button"><i class="fa fa-magnifying-glass"></i></button>
    </div>
  </div>
</header>

<main class="search-main">
  <h1 id="search-title"></h1>
  <div id="search-results"></div>
</main>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const searchInput = document.getElementById("top-search-input");
  const searchButton = document.getElementById("top-search-button");
  const searchResults = document.getElementById("search-results");
  const params = new URLSearchParams(window.location.search);
  const query = params.get("q") || "";

  document.getElementById("search-title").innerText = `Search Results for: ${query}`;

  // Keep top search bar functional
  searchButton.addEventListener("click", function() {
    const newQuery = searchInput.value.trim();
    if (newQuery) {
      window.location.href = `search.html?q=${encodeURIComponent(newQuery)}`;
    }
  });

  searchInput.addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      const newQuery = searchInput.value.trim();
      if (newQuery) {
        window.location.href = `search.html?q=${encodeURIComponent(newQuery)}`;
      }
    }
  });

  // Load posts.json and filter
  fetch("data/posts.json")
    .then(res => res.json())
    .then(posts => {
      const results = posts.filter(post =>
        post.title.toLowerCase().includes(query.toLowerCase()) ||
        post.excerpt.toLowerCase().includes(query.toLowerCase())
      );

      if (results.length === 0) {
        searchResults.innerHTML = "<p>No results found.</p>";
      } else {
        results.forEach(post => {
          const div = document.createElement("div");
          div.className = "post-card";
          div.innerHTML = `
            <h2><a href="${post.link}">${post.title}</a></h2>
            <p><strong>${post.date}</strong> by ${post.author}</p>
            <p>${post.excerpt}</p>
            <p>Categories: ${post.categories.join(", ")}</p>
            <p>${post.comments} Comments</p>
          `;
          searchResults.appendChild(div);
        });
      }
    });
});
</script>

</body>
</html>
